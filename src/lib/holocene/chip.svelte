<script lang="ts">
  import { createEventDispatcher } from 'svelte';

  import IconButton from './icon-button.svelte';

  export let intent: 'warning' | 'default' = 'default';
  export let button = false;
  export let removeButtonLabel: string;

  const dispatch = createEventDispatcher();

  const handleRemove = (e: Event) => {
    e.preventDefault();
    dispatch('remove');
  };
</script>

<span class="chip {intent}">
  {#if button}
    <button class="flex items-center gap-1" on:click>
      <slot />
    </button>
  {:else}
    <slot />
  {/if}
  <IconButton
    label={removeButtonLabel}
    class="h-4 w-4 text-gray-700"
    icon="close"
    on:click={handleRemove}
  />
</span>

<style lang="postcss">
  .chip {
    @apply flex w-fit min-w-fit h-fit flex-row items-center justify-between break-all whitespace-nowrap rounded-md border border-gray-300 bg-gray-50 p-1 text-sm gap-1 text-gray-700;

    :global(.icon-button) {
      @apply ml-1 h-auto w-fit;
    }
  }

  .warning {
    @apply border-red-700 bg-red-50 text-red-700;
  }
</style>
