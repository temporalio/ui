import{S as O,i as Q,s as U,w as S,k as T,l as q,x as C,m as F,y as I,g as v,o as y,p as j,q as w,B as V,d as h,N as G,n as D,e as W,t as E,c as N,a as H,h as A,M as g,b as P,E as X,ad as Y}from"../../../../chunks/index-c85ade65.js";import{b as Z}from"../../../../chunks/workflow-service-aa727209.js";import{W as x,a as ee}from"../../../../chunks/workflows-summary-row-1e2efbed.js";import te from"./_workflow-filters.svelte-c42542ae.js";import{P as le}from"../../../../chunks/pagination-adb051b9.js";import{E as ae}from"../../../../chunks/empty-state-ebe0fe80.js";import{C as M}from"../../../../chunks/code-block-8a2b205f.js";import{t as re}from"../../../../chunks/time-format-99465e29.js";import{P as ie}from"../../../../chunks/page-title-de4dcecc.js";import{p as oe}from"../../../../chunks/stores-2c13cc16.js";import"../../../../chunks/simplify-attributes-6c8439d9.js";import"../../../../chunks/format-date-f8f72e15.js";import"../../../../chunks/to-duration-3f40f60b.js";import"../../../../chunks/is-18735aa3.js";import"../../../../chunks/route-for-api-6e5006a4.js";import"../../../../chunks/route-for-ef692dd7.js";import"../../../../chunks/index-203c0d43.js";import"../../../../chunks/notifications-9d24bb07.js";import"../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../chunks/is-function-b969a126.js";import"../../../../chunks/update-query-parameters-94043e37.js";import"../../../../chunks/navigation-6709cf39.js";import"../../../../chunks/singletons-d1fb5791.js";import"../../../../chunks/workflow-status-2652a969.js";import"../../../../chunks/index-c8da0ebb.js";import"../../../../chunks/copy-to-clipboard-b8e3d18c.js";import"../../../../chunks/select-ac515c57.js";import"../../../../chunks/filter-select-9395ecbe.js";import"./_filter-input.svelte-eb2dade6.js";import"../../../../chunks/index-c0547148.js";import"../../../../chunks/search-c2a42089.js";import"../../../../chunks/button-e0b13963.js";import"../../../../chunks/badge-d2c94945.js";import"../../../../chunks/persist-store-9b44ce28.js";function J(p,t,i){const e=p.slice();return e[7]=t[i],e}function ne(p){let t,i,e,l,s,a,r,o,u,c,b,k,n,d,m;r=new M({props:{content:`tctl --namespace ${p[0]} namespace update --has enabled`,language:"text",inline:!0}});let _=!p[3]&&K(p);return{c(){t=W("h2"),i=E("This namespace is currently not enabled for archival."),e=T(),l=W("p"),s=E("Run this command to enable Archival for Event Histories:"),a=T(),S(r.$$.fragment),o=T(),_&&_.c(),u=T(),c=W("p"),b=E("For more details, please check out "),k=W("a"),n=E("Archival documentation"),d=E("."),this.h()},l(f){t=N(f,"H2",{class:!0,"data-cy":!0});var $=H(t);i=A($,"This namespace is currently not enabled for archival."),$.forEach(h),e=F(f),l=N(f,"P",{});var R=H(l);s=A(R,"Run this command to enable Archival for Event Histories:"),R.forEach(h),a=F(f),C(r.$$.fragment,f),o=F(f),_&&_.l(f),u=F(f),c=N(f,"P",{});var B=H(c);b=A(B,"For more details, please check out "),k=N(B,"A",{class:!0,href:!0,target:!0});var z=H(k);n=A(z,"Archival documentation"),z.forEach(h),d=A(B,"."),B.forEach(h),this.h()},h(){P(t,"class","text-2xl"),P(t,"data-cy","archived-disabled-title"),P(k,"class","text-blue-700 underline"),P(k,"href","https://docs.temporal.io/server/archive-data/"),P(k,"target","_blank")},m(f,$){v(f,t,$),g(t,i),v(f,e,$),v(f,l,$),g(l,s),v(f,a,$),I(r,f,$),v(f,o,$),_&&_.m(f,$),v(f,u,$),v(f,c,$),g(c,b),g(c,k),g(k,n),g(c,d),m=!0},p(f,$){const R={};$&1&&(R.content=`tctl --namespace ${f[0]} namespace update --has enabled`),r.$set(R),f[3]?_&&(D(),y(_,1,1,()=>{_=null}),j()):_?(_.p(f,$),$&8&&w(_,1)):(_=K(f),_.c(),w(_,1),_.m(u.parentNode,u))},i(f){m||(w(r.$$.fragment,f),w(_),m=!0)},o(f){y(r.$$.fragment,f),y(_),m=!1},d(f){f&&h(t),f&&h(e),f&&h(l),f&&h(a),V(r,f),f&&h(o),_&&_.d(f),f&&h(u),f&&h(c)}}}function se(p){let t,i,e,l,s,a,r,o,u,c,b,k,n,d;return r=new M({props:{content:`tctl --namespace ${p[0]} namespace update -vas enabled`,language:"text",inline:!0}}),{c(){t=W("h2"),i=E(`This namespace is currently enabled for archival but visibility is not
    enabled.`),e=T(),l=W("p"),s=E("To enable Visibility Archival:"),a=T(),S(r.$$.fragment),o=T(),u=W("p"),c=E("For more details, please check out "),b=W("a"),k=E("Archival documentation"),n=E("."),this.h()},l(m){t=N(m,"H2",{class:!0,"data-cy":!0});var _=H(t);i=A(_,`This namespace is currently enabled for archival but visibility is not
    enabled.`),_.forEach(h),e=F(m),l=N(m,"P",{});var f=H(l);s=A(f,"To enable Visibility Archival:"),f.forEach(h),a=F(m),C(r.$$.fragment,m),o=F(m),u=N(m,"P",{});var $=H(u);c=A($,"For more details, please check out "),b=N($,"A",{class:!0,href:!0,target:!0});var R=H(b);k=A(R,"Archival documentation"),R.forEach(h),n=A($,"."),$.forEach(h),this.h()},h(){P(t,"class","text-2xl"),P(t,"data-cy","visibility-disabled-title"),P(b,"class","text-blue-700 underline"),P(b,"href","https://docs.temporal.io/server/archive-data/"),P(b,"target","_blank")},m(m,_){v(m,t,_),g(t,i),v(m,e,_),v(m,l,_),g(l,s),v(m,a,_),I(r,m,_),v(m,o,_),v(m,u,_),g(u,c),g(u,b),g(b,k),g(u,n),d=!0},p(m,_){const f={};_&1&&(f.content=`tctl --namespace ${m[0]} namespace update -vas enabled`),r.$set(f)},i(m){d||(w(r.$$.fragment,m),d=!0)},o(m){y(r.$$.fragment,m),d=!1},d(m){m&&h(t),m&&h(e),m&&h(l),m&&h(a),V(r,m),m&&h(o),m&&h(u)}}}function ce(p){let t,i,e,l,s,a,r,o,u;l=new te({});const c=[me,fe],b=[];function k(n,d){var m;return(m=n[1])!=null&&m.length?0:1}return a=k(p),r=b[a]=c[a](p),{c(){t=W("h2"),i=E("Archived Workflows"),e=T(),S(l.$$.fragment),s=T(),r.c(),o=q(),this.h()},l(n){t=N(n,"H2",{class:!0,"data-cy":!0});var d=H(t);i=A(d,"Archived Workflows"),d.forEach(h),e=F(n),C(l.$$.fragment,n),s=F(n),r.l(n),o=q(),this.h()},h(){P(t,"class","text-2xl"),P(t,"data-cy","archived-enabled-title")},m(n,d){v(n,t,d),g(t,i),v(n,e,d),I(l,n,d),v(n,s,d),b[a].m(n,d),v(n,o,d),u=!0},p(n,d){let m=a;a=k(n),a===m?b[a].p(n,d):(D(),y(b[m],1,1,()=>{b[m]=null}),j(),r=b[a],r?r.p(n,d):(r=b[a]=c[a](n),r.c()),w(r,1),r.m(o.parentNode,o))},i(n){u||(w(l.$$.fragment,n),w(r),u=!0)},o(n){y(l.$$.fragment,n),y(r),u=!1},d(n){n&&h(t),n&&h(e),V(l,n),n&&h(s),b[a].d(n),n&&h(o)}}}function K(p){let t,i,e,l,s;return l=new M({props:{content:`tctl --namespace ${p[0]} namespace update -vas enabled`,language:"text",inline:!0}}),{c(){t=W("p"),i=E("To enable Visibility Archival:"),e=T(),S(l.$$.fragment)},l(a){t=N(a,"P",{});var r=H(t);i=A(r,"To enable Visibility Archival:"),r.forEach(h),e=F(a),C(l.$$.fragment,a)},m(a,r){v(a,t,r),g(t,i),v(a,e,r),I(l,a,r),s=!0},p(a,r){const o={};r&1&&(o.content=`tctl --namespace ${a[0]} namespace update -vas enabled`),l.$set(o)},i(a){s||(w(l.$$.fragment,a),s=!0)},o(a){y(l.$$.fragment,a),s=!1},d(a){a&&h(t),a&&h(e),V(l,a)}}}function fe(p){let t,i;return t=new ae({props:{title:"No Workflows Found",content:"If you have filters applied, try adjusting them."}}),{c(){S(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){I(t,e,l),i=!0},p:X,i(e){i||(w(t.$$.fragment,e),i=!0)},o(e){y(t.$$.fragment,e),i=!1},d(e){V(t,e)}}}function me(p){let t,i;return t=new le({props:{items:p[1],$$slots:{default:[pe,({visibleItems:e})=>({6:e}),({visibleItems:e})=>e?64:0]},$$scope:{ctx:p}}}),{c(){S(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){I(t,e,l),i=!0},p(e,l){const s={};l&2&&(s.items=e[1]),l&1121&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(e){i||(w(t.$$.fragment,e),i=!0)},o(e){y(t.$$.fragment,e),i=!1},d(e){V(t,e)}}}function L(p){let t,i;return t=new ee({props:{workflow:p[7],namespace:p[0],timeFormat:p[5]}}),{c(){S(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){I(t,e,l),i=!0},p(e,l){const s={};l&64&&(s.workflow=e[7]),l&1&&(s.namespace=e[0]),l&32&&(s.timeFormat=e[5]),t.$set(s)},i(e){i||(w(t.$$.fragment,e),i=!0)},o(e){y(t.$$.fragment,e),i=!1},d(e){V(t,e)}}}function ue(p){let t,i,e=p[6],l=[];for(let a=0;a<e.length;a+=1)l[a]=L(J(p,e,a));const s=a=>y(l[a],1,1,()=>{l[a]=null});return{c(){for(let a=0;a<l.length;a+=1)l[a].c();t=q()},l(a){for(let r=0;r<l.length;r+=1)l[r].l(a);t=q()},m(a,r){for(let o=0;o<l.length;o+=1)l[o].m(a,r);v(a,t,r),i=!0},p(a,r){if(r&97){e=a[6];let o;for(o=0;o<e.length;o+=1){const u=J(a,e,o);l[o]?(l[o].p(u,r),w(l[o],1)):(l[o]=L(u),l[o].c(),w(l[o],1),l[o].m(t.parentNode,t))}for(D(),o=e.length;o<l.length;o+=1)s(o);j()}},i(a){if(!i){for(let r=0;r<e.length;r+=1)w(l[r]);i=!0}},o(a){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)y(l[r]);i=!1},d(a){Y(l,a),a&&h(t)}}}function pe(p){let t,i;return t=new x({props:{$$slots:{default:[ue]},$$scope:{ctx:p}}}),{c(){S(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){I(t,e,l),i=!0},p(e,l){const s={};l&1121&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(e){i||(w(t.$$.fragment,e),i=!0)},o(e){y(t.$$.fragment,e),i=!1},d(e){V(t,e)}}}function _e(p){let t,i,e,l,s,a;t=new ie({props:{title:`Archival | ${p[0]}`,url:p[4].url.href}});const r=[ce,se,ne],o=[];function u(c,b){return c[2]&&c[3]?0:c[2]?1:2}return e=u(p),l=o[e]=r[e](p),{c(){S(t.$$.fragment),i=T(),l.c(),s=q()},l(c){C(t.$$.fragment,c),i=F(c),l.l(c),s=q()},m(c,b){I(t,c,b),v(c,i,b),o[e].m(c,b),v(c,s,b),a=!0},p(c,[b]){const k={};b&1&&(k.title=`Archival | ${c[0]}`),b&16&&(k.url=c[4].url.href),t.$set(k);let n=e;e=u(c),e===n?o[e].p(c,b):(D(),y(o[n],1,1,()=>{o[n]=null}),j(),l=o[e],l?l.p(c,b):(l=o[e]=r[e](c),l.c()),w(l,1),l.m(s.parentNode,s))},i(c){a||(w(t.$$.fragment,c),w(l),a=!0)},o(c){y(t.$$.fragment,c),y(l),a=!1},d(c){V(t,c),c&&h(i),o[e].d(c),c&&h(s)}}}const Xe=async function({params:p,url:t,stuff:i}){var e,l;const{searchParams:s}=t;s.has("time-range")||s.set("time-range","1 day");const a=p.namespace,r=s.get("workflow-id"),o=s.get("workflow-type"),u=s.get("time-range"),c=s.get("status"),b={workflowId:r,workflowType:o,closeTime:u,executionStatus:c},n=i.namespaces.find(f=>f.namespaceInfo.name===a),d=((e=n==null?void 0:n.config)===null||e===void 0?void 0:e.historyArchivalState)==="Enabled",m=((l=n==null?void 0:n.config)===null||l===void 0?void 0:l.visibilityArchivalState)==="Enabled",_=d&&m?await Z(a,b,fetch):null;return{props:{workflows:_?_.workflows:[],namespace:a,archivalEnabled:d,visibilityArchivalEnabled:m}}};function be(p,t,i){let e,l;G(p,oe,u=>i(4,e=u)),G(p,re,u=>i(5,l=u));let{namespace:s}=t,{workflows:a}=t,{archivalEnabled:r=!1}=t,{visibilityArchivalEnabled:o=!1}=t;return p.$$set=u=>{"namespace"in u&&i(0,s=u.namespace),"workflows"in u&&i(1,a=u.workflows),"archivalEnabled"in u&&i(2,r=u.archivalEnabled),"visibilityArchivalEnabled"in u&&i(3,o=u.visibilityArchivalEnabled)},[s,a,r,o,e,l]}class Ye extends O{constructor(t){super(),Q(this,t,be,_e,U,{namespace:0,workflows:1,archivalEnabled:2,visibilityArchivalEnabled:3})}}export{Ye as default,Xe as load};
