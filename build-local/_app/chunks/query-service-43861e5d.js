var d=Object.defineProperty,f=Object.defineProperties;var l=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;var u=(t,r,e)=>r in t?d(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,s=(t,r)=>{for(var e in r||(r={}))p.call(r,e)&&u(t,e,r[e]);if(c)for(var e of c(r))m.call(r,e)&&u(t,e,r[e]);return t},i=(t,r)=>f(t,l(r));import{r as g,a as h,i as O}from"./route-for-api-6e5006a4.js";import{a as _}from"./atob-eb4fc9a1.js";const I=t=>{const r=t.indexOf("["),e=t.indexOf("]");return t.slice(r+1,e).split(" ").filter(a=>a!=="__stack_trace").map(a=>a.endsWith(",")?a.slice(0,a.length-1):a)},T=async(t,r)=>(r=await r,{namespace:t,workflowId:r.id,runId:r.runId});async function y({workflow:t,namespace:r,queryType:e},a=fetch,n){t=await t;const o=await T(r,t);return await g(h("query",o),{options:{method:"POST",body:JSON.stringify({execution:{workflowId:t.id,runId:t.runId},query:{queryType:e}})},request:a,onError:n,notifyOnError:!1})}async function Q(t,r=fetch){return new Promise((e,a)=>{y(i(s({},t),{queryType:"@@temporal-internal__list"}),r,n=>{O(n.body)&&n.body.message.includes("@@temporal-internal__list")?e(I(n.body.message)):a(n)})})}async function b(t,r=fetch){return y(t,r).then(e=>{const{queryResult:a}=e!=null?e:{queryResult:{payloads:[]}};let n=a.payloads;try{return n[0]&&(n=_(a.payloads[0].data)),JSON.parse(n)}catch{return typeof n!="string"?JSON.stringify(n):n}})}async function A(t,r=fetch){return b(i(s({},t),{queryType:"__stack_trace"}),r)}export{b as a,A as b,Q as g};
