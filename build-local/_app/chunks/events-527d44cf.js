var E=Object.defineProperty,G=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var i=Object.getOwnPropertySymbols;var d=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var v=(e,t,r)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&v(e,r,t[r]);if(i)for(var r of i(t))w.call(t,r)&&v(e,r,t[r]);return e},y=(e,t)=>G(e,h(t));var k=(e,t)=>{var r={};for(var s in e)d.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&i)for(var s of i(e))t.indexOf(s)<0&&w.call(e,s)&&(r[s]=e[s]);return r};import{d as o,r as _,w as f}from"./index-203c0d43.js";import{p as c}from"./stores-2c13cc16.js";import{a as S}from"./events-service-328baf97.js";import{a as I,b as m}from"./event-view-177e8eae.js";import{m as l}from"./route-for-ef692dd7.js";import{w as q,d as H}from"./with-loading-22689bcc.js";import{g as O}from"./get-event-categorization-732ccf42.js";import{X as R}from"./index-c85ade65.js";const j={events:[],eventGroups:[]},x=o([c],([e])=>e.params.namespace?l(e.params.namespace):""),C=o([c],([e])=>e.params.workflow?l(e.params.workflow):""),F=o([c],([e])=>e.params.run?l(e.params.run):""),L=o([c],([e])=>e.stuff.settings),b={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},P=f(b),Z=()=>{P.set(b)},N=(e,t)=>{for(const n of["namespace","workflowId","runId"])if(!e[n])return!1;let r=!0;const s=R(t);for(const n of Object.keys(s))if(s[n]!==e[n]){r=!1;break}return r?!1:(t.set(e),!0)},T=o([x,C,F,I],([e,t,r,s])=>({namespace:e,workflowId:t,runId:r,sort:s})),U=o([T,L],([e,t])=>y(g({},e),{settings:t})),W=e=>U.subscribe(async t=>{const n=t,{settings:r}=n,s=k(n,["settings"]);N(s,P)&&q(z,X,async()=>{var u;const a=await S(t);(u=a==null?void 0:a.events)!=null&&u.length?e(a):setTimeout(()=>{e(a)},H)})}),p=_(j,W),$=o([p,m],([e,t])=>{const{events:r}=e;return t?r.filter(s=>s.category===t):r}),ee=o([p,m],([e,t])=>{const{eventGroups:r}=e;return t?r.filter(s=>s.category===t):r}),te=o([p,I,m],([e,t,r])=>{const{events:s}=e,n=t==="descending"?s.slice().reverse():s,a=O(n);return r?a.filter(u=>u.category===r):a}),X=f(!0),z=f(!0);export{te as a,$ as b,Z as c,ee as d,p as e,X as u};
