var q=Object.defineProperty,K=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var g=(t,o,n)=>o in t?q(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,E=(t,o)=>{for(var n in o||(o={}))Q.call(o,n)&&g(t,n,o[n]);if(T)for(var n of T(o))R.call(o,n)&&g(t,n,o[n]);return t},h=(t,o)=>K(t,P(o));import{s as D}from"./simplify-attributes-6c8439d9.js";import{r as W,a as $}from"./route-for-api-6e5006a4.js";import{b as N,e as j,h as A,j as F}from"./to-duration-3f40f60b.js";const B=(t=[])=>t.map(o=>{const n=D(o,!0),e=o.activityId;return h(E({},n),{id:e})}),S=t=>{var m,x,d,y,I;const o=t.workflowExecutionInfo.type.name,n=t.workflowExecutionInfo.execution.workflowId,e=t.workflowExecutionInfo.execution.runId,s=String(t.workflowExecutionInfo.startTime),a=String(t.workflowExecutionInfo.closeTime),r=t.workflowExecutionInfo.status,w=t.workflowExecutionInfo.status==="Running",l=t.workflowExecutionInfo.historyLength,k=`/workflows/${n}/${e}`,f=(x=(m=t==null?void 0:t.executionConfig)==null?void 0:m.taskQueue)==null?void 0:x.name,i=(d=t==null?void 0:t.workflowExecutionInfo)==null?void 0:d.parentNamespaceId,c=(y=t==null?void 0:t.workflowExecutionInfo)==null?void 0:y.parentExecution,u=t.workflowExecutionInfo.stateTransitionCount,b=(I=t.executionConfig)==null?void 0:I.defaultWorkflowTaskTimeout,C=B(t.pendingActivities);return{name:o,id:n,runId:e,startTime:s,endTime:a,status:r,historyEvents:l,url:k,taskQueue:f,pendingActivities:C,parentNamespaceId:i,parent:c,stateTransitionCount:u,isRunning:w,defaultWorkflowTaskTimeout:b}},L=t=>(t.executions||[]).map(o=>S({workflowExecutionInfo:o})),O={workflowId:"WorkflowId",workflowType:"WorkflowType",timeRange:"StartTime",executionStatus:"ExecutionStatus",closeTime:"CloseTime"},U=["workflowId","workflowType","timeRange","executionStatus","closeTime"],V=t=>!(t===null||t===void 0||t===""||typeof t=="string"&&t==="undefined"),p=t=>{if(typeof t!="string")return!1;for(const o of U)if(o===t)return!0;return!1},z=(t,o,n)=>{const e=O[t];return o==="All"?"":N(o)||j(o)?n?`${e} > "${A(o)}"`:`${e} BETWEEN "${A(o)}" AND "${F()}"`:`${e}="${o}"`},G=(t,o)=>Object.entries(t).map(([n,e])=>{if(p(n)&&V(e))return z(n,e,o)}).filter(Boolean),H=(t,o=!1)=>G(t,o).join(" and "),J=async(t,o,n=fetch,e=!1)=>{var f;const s=decodeURIComponent(o.query||H(o,e)),a=e?"workflows.archived":"workflows";let r="";const w=i=>{var c,u;return r=(u=(c=i==null?void 0:i.body)==null?void 0:c.message)!=null?u:`Error fetching workflows: ${i.status}: ${i.statusText}`},{executions:l,nextPageToken:k}=(f=await W($(a,{namespace:t}),{params:{query:s},onError:w,request:n}))!=null?f:{executions:[],nextPageToken:""};return{workflows:L({executions:l}),nextPageToken:String(k),error:r}},_=async(t,o,n=fetch)=>J(t,o,n,!0);async function v(t,o=fetch){return W($("workflow",t),{request:o}).then(S)}export{J as a,_ as b,v as f,H as t};
