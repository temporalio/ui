var F=Object.defineProperty;var f=Object.getOwnPropertySymbols;var m=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var d=(r,n,e)=>n in r?F(r,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[n]=e,h=(r,n)=>{for(var e in n||(n={}))m.call(n,e)&&d(r,e,n[e]);if(f)for(var e of f(n))v.call(n,e)&&d(r,e,n[e]);return r};var A=(r,n)=>{var e={};for(var s in r)m.call(r,s)&&n.indexOf(s)<0&&(e[s]=r[s]);if(r!=null&&f)for(var s of f(r))n.indexOf(s)<0&&v.call(r,s)&&(e[s]=r[s]);return e};import{h as b,r as l,a as w}from"./route-for-api-6e5006a4.js";import{i as p}from"./is-function-b969a126.js";import{t as P}from"./index-eb012da8.js";import{b as j}from"./is-18735aa3.js";const E=(r={},n={})=>{const e=h({},r);for(const s of Object.keys(n)){const t=e[s];Array.isArray(t)?e[s]=e[s].concat(n[s]):typeof t=="object"&&!Array.isArray(t)?e[s]=E(e[s],n[s]):e[s]=n[s]}return e},k=async(r,{onStart:n,onUpdate:e,onComplete:s,onError:t=b,token:u,previousProps:o}={})=>{!o&&p(n)&&n();try{const i=await r(u),{nextPageToken:c}=i,g=A(i,["nextPageToken"]),a=E(o,g);return p(e)&&e(a,g),c?k(r,{onStart:n,onUpdate:e,onComplete:s,token:c,previousProps:a}):(p(s)&&s(a),a)}catch(y){t(y)}},q=r=>!j(r)||r==="descending"?"events.descending":r==="ascending"?"events.ascending":"events.descending",x=async({namespace:r,workflowId:n,runId:e,sort:s,onStart:t,onUpdate:u,onComplete:o})=>{const i=q(s);return(await k(async c=>l(w(i,{namespace:r,workflowId:n,runId:e}),{token:c,request:fetch}),{onStart:t,onUpdate:u,onComplete:o})).history.events},z=async r=>{const{settings:n,namespace:e}=r;return x(r).then(s=>P({response:s,namespace:e,settings:n}))};export{z as a,x as f};
